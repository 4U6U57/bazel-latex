\documentclass{article}
% Definitions to make soulpos work with lualatex. Ideally, soulpos
% should just depend on luatex85.
\let\pdflastxpos \lastxpos
\let\pdflastypos \lastypos
\let\pdfsavepos \savepos
\usepackage{soulpos}
\begin{document}
\ulposdef{\banana}{\rule[-.8ex]{\ulwidth}{.5pt}}
\banana{Yellow}
\end{document}
